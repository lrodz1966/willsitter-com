<script>
  let html5QrCode;

  function startQRScanner() {
    Html5Qrcode.getCameras().then(devices => {
      if (devices && devices.length > 0) {
        const cameraId = devices[0].id;
        html5QrCode = new Html5Qrcode("reader");
        html5QrCode.start(
          cameraId,
          { fps: 10, qrbox: { width: 250, height: 250 } },
          (decodedText) => {
            console.log("📦 QR code decoded:", decodedText);
            html5QrCode.stop(); // stop camera
            // ✅ Redirect to Wix page with QR code in URL
            window.location.href = `https://your-wix-site.com/return?qrcode=${encodeURIComponent(decodedText)}`;
          },
          (errorMessage) => { /* ignore errors */ }
        ).catch(err => console.error("❌ Start error:", err));
      }
    }).catch(err => console.error("❌ Camera error:", err));
  }

  startQRScanner();
</script>


